<!-- frame_u is a paranthesized list of entries and triggers this model. 
	 Its last entry is either a single or a compound event type delineated 
	 from the rest of the entries by the unique ";" delimiter. 
	 The very last entry is always the event type.
-->

<domain>
	<model trigger="frame_u">
		<rule>
			<case>
				<!--
					Basic EventTypes: 
					
					anniversary
					birthday
					chill
					graduation
					job
					party
					seminar

					dp: conference, meeting/meetup, date(two meanings),
						go-for-a-X, ...

					dp: extending from event to activity:
						walk, shower, excercise, call, talk, ...
				-->

				<!-- hard-coded "known" compound event types: -->
				<condition>
					<if var="u_u" relation="contains" value="party" />
						<condition>
							<if var="frame_u" relation="contains" value=",{X} party" />
						</condition>
						<effect>
		                	<add var="a_u" value="(Type,{X})" />
						</effect>							                	
				</condition>
				<effect>
					<add var="a_u" value="(EventType,party)" />
				</effect>

				<condition>
					<if var="u_u" relation="contains" value="anniversary" />
						<condition>
							<if var="frame_u" relation="contains" value=",{T} anniversary" />
						</condition>
						<effect>
		                	<add var="a_u" value="(Type,{T})" />
						</effect>							                	
				</condition>
				<effect>
					<add var="a_u" value="(EventType,anniversary)" />
				</effect>
				<!---->


				<!-- 
					 This section handles two types of events:
					 1. Known events not covered above.
					 2. Unknown events, whether single or compound.

					 In fact this code is sufficient to handle all 
					 cases but we added hard-coded compound event
					 types above.
				-->
				<condition>
					<if var="frame_u" relation="contains" value=";{E})" />
						<condition>
							<if var="frame_u" relation="contains" value=";{T} {F})" />			
						</condition>
						<effect>
		                	<add var="a_u" value="(Type,{T})" />
						</effect>							                	
				</condition>
				<effect>
					<add var="a_u" value="(EventType,{E})" />
				</effect>
				<!---->
			</case>
		</rule>
	</model>
</domain>
